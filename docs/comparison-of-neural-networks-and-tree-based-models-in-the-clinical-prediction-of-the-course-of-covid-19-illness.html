<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5.4 Comparison of neural networks and tree-based models in the clinical prediction of the course of COVID-19 illness | Case Studies</title>
  <meta name="description" content="Case studies in machine learning." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="5.4 Comparison of neural networks and tree-based models in the clinical prediction of the course of COVID-19 illness | Case Studies" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="/images/cover.png" />
  <meta property="og:description" content="Case studies in machine learning." />
  <meta name="github-repo" content="mini-pw/2021L-WB-Book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5.4 Comparison of neural networks and tree-based models in the clinical prediction of the course of COVID-19 illness | Case Studies" />
  
  <meta name="twitter:description" content="Case studies in machine learning." />
  <meta name="twitter:image" content="/images/cover.png" />

<meta name="author" content="Faculty of Mathematics and Information Science, Warsaw University of Technology" />


<meta name="date" content="2021-05-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html"/>
<link rel="next" href="rashomonml.html"/>
<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>



<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><h3>Case Studies</h3></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="technical-setup.html"><a href="technical-setup.html"><i class="fa fa-check"></i>Technical Setup</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="explainable-artificial-intelligence-1.html"><a href="explainable-artificial-intelligence-1.html"><i class="fa fa-check"></i><b>1</b> Explainable Artificial Intelligence 1</a>
<ul>
<li class="chapter" data-level="1.1" data-path="xai1-explainable-cards.html"><a href="xai1-explainable-cards.html"><i class="fa fa-check"></i><b>1.1</b> Explaining Credit Card Customers churns</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="xai1-explainable-cards.html"><a href="xai1-explainable-cards.html#global-explanations"><i class="fa fa-check"></i><b>1.1.1</b> Global explanations</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="ml-in-predition-of-real-estate-prices.html"><a href="ml-in-predition-of-real-estate-prices.html"><i class="fa fa-check"></i><b>1.2</b> ML in predition of real estate prices</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="ml-in-predition-of-real-estate-prices.html"><a href="ml-in-predition-of-real-estate-prices.html#abstract"><i class="fa fa-check"></i><b>1.2.1</b> Abstract</a></li>
<li class="chapter" data-level="1.2.2" data-path="ml-in-predition-of-real-estate-prices.html"><a href="ml-in-predition-of-real-estate-prices.html#introduction"><i class="fa fa-check"></i><b>1.2.2</b> Introduction</a></li>
<li class="chapter" data-level="1.2.3" data-path="ml-in-predition-of-real-estate-prices.html"><a href="ml-in-predition-of-real-estate-prices.html#related-work"><i class="fa fa-check"></i><b>1.2.3</b> Related Work</a></li>
<li class="chapter" data-level="1.2.4" data-path="ml-in-predition-of-real-estate-prices.html"><a href="ml-in-predition-of-real-estate-prices.html#methodology"><i class="fa fa-check"></i><b>1.2.4</b> Methodology</a></li>
<li class="chapter" data-level="1.2.5" data-path="ml-in-predition-of-real-estate-prices.html"><a href="ml-in-predition-of-real-estate-prices.html#results"><i class="fa fa-check"></i><b>1.2.5</b> Results</a></li>
<li class="chapter" data-level="1.2.6" data-path="ml-in-predition-of-real-estate-prices.html"><a href="ml-in-predition-of-real-estate-prices.html#summary-and-conclusions"><i class="fa fa-check"></i><b>1.2.6</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="xai-heart-disease.html"><a href="xai-heart-disease.html"><i class="fa fa-check"></i><b>1.3</b> How not to have broken heart &lt;3</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="xai-heart-disease.html"><a href="xai-heart-disease.html#introduction-1"><i class="fa fa-check"></i><b>1.3.1</b> Introduction</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="xai1-explainable-wine.html"><a href="xai1-explainable-wine.html"><i class="fa fa-check"></i><b>1.4</b> Red wine quality mystery</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="xai1-explainable-wine.html"><a href="xai1-explainable-wine.html#abstract-1"><i class="fa fa-check"></i><b>1.4.1</b> Abstract</a></li>
<li class="chapter" data-level="1.4.2" data-path="xai1-explainable-wine.html"><a href="xai1-explainable-wine.html#introduction-and-motivation"><i class="fa fa-check"></i><b>1.4.2</b> Introduction and Motivation</a></li>
<li class="chapter" data-level="1.4.3" data-path="xai1-explainable-wine.html"><a href="xai1-explainable-wine.html#methodology-1"><i class="fa fa-check"></i><b>1.4.3</b> Methodology</a></li>
<li class="chapter" data-level="1.4.4" data-path="xai1-explainable-wine.html"><a href="xai1-explainable-wine.html#global-explanations-1"><i class="fa fa-check"></i><b>1.4.4</b> Global explanations</a></li>
<li class="chapter" data-level="1.4.5" data-path="xai1-explainable-wine.html"><a href="xai1-explainable-wine.html#summary"><i class="fa fa-check"></i><b>1.4.5</b> Summary</a></li>
<li class="chapter" data-level="1.4.6" data-path="xai1-explainable-wine.html"><a href="xai1-explainable-wine.html#conclusions"><i class="fa fa-check"></i><b>1.4.6</b> Conclusions</a></li>
<li class="chapter" data-level="1.4.7" data-path="xai1-explainable-wine.html"><a href="xai1-explainable-wine.html#references"><i class="fa fa-check"></i><b>1.4.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="xai1-explainable-hotels.html"><a href="xai1-explainable-hotels.html"><i class="fa fa-check"></i><b>1.5</b> eXplaining predictions of booking cancelations</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="xai1-explainable-hotels.html"><a href="xai1-explainable-hotels.html#introduction-2"><i class="fa fa-check"></i><b>1.5.1</b> Introduction</a></li>
<li class="chapter" data-level="1.5.2" data-path="xai1-explainable-hotels.html"><a href="xai1-explainable-hotels.html#dataset_models"><i class="fa fa-check"></i><b>1.5.2</b> Dataset and models</a></li>
<li class="chapter" data-level="1.5.3" data-path="xai1-explainable-hotels.html"><a href="xai1-explainable-hotels.html#local"><i class="fa fa-check"></i><b>1.5.3</b> Local explanations</a></li>
<li class="chapter" data-level="1.5.4" data-path="xai1-explainable-hotels.html"><a href="xai1-explainable-hotels.html#global-explanations-2"><i class="fa fa-check"></i><b>1.5.4</b> Global explanations</a></li>
<li class="chapter" data-level="1.5.5" data-path="xai1-explainable-hotels.html"><a href="xai1-explainable-hotels.html#summary-and-conclusions-1"><i class="fa fa-check"></i><b>1.5.5</b> Summary and conclusions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="explainable-artificial-intelligence-2.html"><a href="explainable-artificial-intelligence-2.html"><i class="fa fa-check"></i><b>2</b> Explainable Artificial Intelligence 2</a>
<ul>
<li class="chapter" data-level="2.1" data-path="xai1-explainable-german-credits.html"><a href="xai1-explainable-german-credits.html"><i class="fa fa-check"></i><b>2.1</b> Classifying people as good or bad credit risks</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="xai1-explainable-german-credits.html"><a href="xai1-explainable-german-credits.html#introduction-3"><i class="fa fa-check"></i><b>2.1.1</b> Introduction</a></li>
<li class="chapter" data-level="2.1.2" data-path="xai1-explainable-german-credits.html"><a href="xai1-explainable-german-credits.html#dataset-and-models"><i class="fa fa-check"></i><b>2.1.2</b> Dataset and models</a></li>
<li class="chapter" data-level="2.1.3" data-path="xai1-explainable-german-credits.html"><a href="xai1-explainable-german-credits.html#local-explanations"><i class="fa fa-check"></i><b>2.1.3</b> Local explanations</a></li>
<li class="chapter" data-level="2.1.4" data-path="xai1-explainable-german-credits.html"><a href="xai1-explainable-german-credits.html#global-explanations-3"><i class="fa fa-check"></i><b>2.1.4</b> Global explanations</a></li>
<li class="chapter" data-level="2.1.5" data-path="xai1-explainable-german-credits.html"><a href="xai1-explainable-german-credits.html#summary-and-conclusions-2"><i class="fa fa-check"></i><b>2.1.5</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="how-the-price-of-the-house-is-influenced-by-neighborhood-xai-methods-for-interpretation-the-black-box-model.html"><a href="how-the-price-of-the-house-is-influenced-by-neighborhood-xai-methods-for-interpretation-the-black-box-model.html"><i class="fa fa-check"></i><b>2.2</b> How the price of the house is influenced by neighborhood? XAI methods for interpretation the black box model</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="how-the-price-of-the-house-is-influenced-by-neighborhood-xai-methods-for-interpretation-the-black-box-model.html"><a href="how-the-price-of-the-house-is-influenced-by-neighborhood-xai-methods-for-interpretation-the-black-box-model.html#abstract-2"><i class="fa fa-check"></i><b>2.2.1</b> Abstract</a></li>
<li class="chapter" data-level="2.2.2" data-path="how-the-price-of-the-house-is-influenced-by-neighborhood-xai-methods-for-interpretation-the-black-box-model.html"><a href="how-the-price-of-the-house-is-influenced-by-neighborhood-xai-methods-for-interpretation-the-black-box-model.html#introduction-4"><i class="fa fa-check"></i><b>2.2.2</b> Introduction</a></li>
<li class="chapter" data-level="2.2.3" data-path="how-the-price-of-the-house-is-influenced-by-neighborhood-xai-methods-for-interpretation-the-black-box-model.html"><a href="how-the-price-of-the-house-is-influenced-by-neighborhood-xai-methods-for-interpretation-the-black-box-model.html#literature"><i class="fa fa-check"></i><b>2.2.3</b> Literature</a></li>
<li class="chapter" data-level="2.2.4" data-path="how-the-price-of-the-house-is-influenced-by-neighborhood-xai-methods-for-interpretation-the-black-box-model.html"><a href="how-the-price-of-the-house-is-influenced-by-neighborhood-xai-methods-for-interpretation-the-black-box-model.html#local-explanations-1"><i class="fa fa-check"></i><b>2.2.4</b> Local explanations</a></li>
<li class="chapter" data-level="2.2.5" data-path="how-the-price-of-the-house-is-influenced-by-neighborhood-xai-methods-for-interpretation-the-black-box-model.html"><a href="how-the-price-of-the-house-is-influenced-by-neighborhood-xai-methods-for-interpretation-the-black-box-model.html#global-explanations-4"><i class="fa fa-check"></i><b>2.2.5</b> Global explanations</a></li>
<li class="chapter" data-level="2.2.6" data-path="how-the-price-of-the-house-is-influenced-by-neighborhood-xai-methods-for-interpretation-the-black-box-model.html"><a href="how-the-price-of-the-house-is-influenced-by-neighborhood-xai-methods-for-interpretation-the-black-box-model.html#conclusion"><i class="fa fa-check"></i><b>2.2.6</b> Conclusion</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="deep-learning-1.html"><a href="deep-learning-1.html"><i class="fa fa-check"></i><b>3</b> Deep Learning 1</a>
<ul>
<li class="chapter" data-level="3.1" data-path="bcdunet.html"><a href="bcdunet.html"><i class="fa fa-check"></i><b>3.1</b> BCDUNet</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="bcdunet.html"><a href="bcdunet.html#abstract-3"><i class="fa fa-check"></i><b>3.1.1</b> Abstract</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="an-exploration-of-deepcovidexplainer-explainable-covid-19-diagnosis-from-chest-x-rays.html"><a href="an-exploration-of-deepcovidexplainer-explainable-covid-19-diagnosis-from-chest-x-rays.html"><i class="fa fa-check"></i><b>3.2</b> An Exploration of DeepCovidExplainer: Explainable COVID-19 Diagnosis from Chest X-rays</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="an-exploration-of-deepcovidexplainer-explainable-covid-19-diagnosis-from-chest-x-rays.html"><a href="an-exploration-of-deepcovidexplainer-explainable-covid-19-diagnosis-from-chest-x-rays.html#introduction-5"><i class="fa fa-check"></i><b>3.2.1</b> Introduction</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="erscovid.html"><a href="erscovid.html"><i class="fa fa-check"></i><b>3.3</b> ERSCovid</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="erscovid.html"><a href="erscovid.html#introduction-6"><i class="fa fa-check"></i><b>3.3.1</b> Introduction</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="covid-net.html"><a href="covid-net.html"><i class="fa fa-check"></i><b>3.4</b> COVID-Net</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="covid-net.html"><a href="covid-net.html#introduction-7"><i class="fa fa-check"></i><b>3.4.1</b> Introduction</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="deep-learning-2.html"><a href="deep-learning-2.html"><i class="fa fa-check"></i><b>4</b> Deep Learning 2</a>
<ul>
<li class="chapter" data-level="4.1" data-path="what-does-it-mean-for-an-article-to-be-reproducible-analyzing-axondeepseg-as-an-example-of-a-reproducible-article.html"><a href="what-does-it-mean-for-an-article-to-be-reproducible-analyzing-axondeepseg-as-an-example-of-a-reproducible-article.html"><i class="fa fa-check"></i><b>4.1</b> What does it mean for an article to be reproducible? Analyzing AxonDeepSeg as an example of a reproducible article</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="what-does-it-mean-for-an-article-to-be-reproducible-analyzing-axondeepseg-as-an-example-of-a-reproducible-article.html"><a href="what-does-it-mean-for-an-article-to-be-reproducible-analyzing-axondeepseg-as-an-example-of-a-reproducible-article.html#introduction-8"><i class="fa fa-check"></i><b>4.1.1</b> Introduction</a></li>
<li class="chapter" data-level="4.1.2" data-path="what-does-it-mean-for-an-article-to-be-reproducible-analyzing-axondeepseg-as-an-example-of-a-reproducible-article.html"><a href="what-does-it-mean-for-an-article-to-be-reproducible-analyzing-axondeepseg-as-an-example-of-a-reproducible-article.html#analyzing-the-ferplus-paper"><i class="fa fa-check"></i><b>4.1.2</b> Analyzing the FERPlus paper</a></li>
<li class="chapter" data-level="4.1.3" data-path="what-does-it-mean-for-an-article-to-be-reproducible-analyzing-axondeepseg-as-an-example-of-a-reproducible-article.html"><a href="what-does-it-mean-for-an-article-to-be-reproducible-analyzing-axondeepseg-as-an-example-of-a-reproducible-article.html#reproducibility-analysis"><i class="fa fa-check"></i><b>4.1.3</b> Reproducibility analysis</a></li>
<li class="chapter" data-level="4.1.4" data-path="what-does-it-mean-for-an-article-to-be-reproducible-analyzing-axondeepseg-as-an-example-of-a-reproducible-article.html"><a href="what-does-it-mean-for-an-article-to-be-reproducible-analyzing-axondeepseg-as-an-example-of-a-reproducible-article.html#analyzing-the-axondeepseg-paper"><i class="fa fa-check"></i><b>4.1.4</b> Analyzing the AxonDeepSeg paper</a></li>
<li class="chapter" data-level="4.1.5" data-path="what-does-it-mean-for-an-article-to-be-reproducible-analyzing-axondeepseg-as-an-example-of-a-reproducible-article.html"><a href="what-does-it-mean-for-an-article-to-be-reproducible-analyzing-axondeepseg-as-an-example-of-a-reproducible-article.html#reproducibility-analysis-1"><i class="fa fa-check"></i><b>4.1.5</b> Reproducibility analysis</a></li>
<li class="chapter" data-level="4.1.6" data-path="what-does-it-mean-for-an-article-to-be-reproducible-analyzing-axondeepseg-as-an-example-of-a-reproducible-article.html"><a href="what-does-it-mean-for-an-article-to-be-reproducible-analyzing-axondeepseg-as-an-example-of-a-reproducible-article.html#conclusion-1"><i class="fa fa-check"></i><b>4.1.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="ara-cnn-a-bayesian-deep-learning-model-intended-for-histopathological-image-classification-.html"><a href="ara-cnn-a-bayesian-deep-learning-model-intended-for-histopathological-image-classification-.html"><i class="fa fa-check"></i><b>4.2</b> ARA-CNN - a Bayesian deep learning model intended for histopathological image classification.</a></li>
<li class="chapter" data-level="4.3" data-path="rethinking-the-u-net-architecture-for-multimodal-biomedical-image-segmentation.html"><a href="rethinking-the-u-net-architecture-for-multimodal-biomedical-image-segmentation.html"><i class="fa fa-check"></i><b>4.3</b> Rethinking the U-Net architecture for multimodal biomedical image segmentation</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="rethinking-the-u-net-architecture-for-multimodal-biomedical-image-segmentation.html"><a href="rethinking-the-u-net-architecture-for-multimodal-biomedical-image-segmentation.html#introduction-9"><i class="fa fa-check"></i><b>4.3.1</b> Introduction</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="dl2-rmdl-unet.html"><a href="dl2-rmdl-unet.html"><i class="fa fa-check"></i><b>4.4</b> Analyzing Reproducibility churns</a></li>
<li class="chapter" data-level="4.5" data-path="title.html"><a href="title.html"><i class="fa fa-check"></i><b>4.5</b> Title</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="title.html"><a href="title.html#title-authors-abstract-keywords"><i class="fa fa-check"></i><b>4.5.1</b> Title, Authors, Abstract, Keywords</a></li>
<li class="chapter" data-level="4.5.2" data-path="title.html"><a href="title.html#introduction-10"><i class="fa fa-check"></i><b>4.5.2</b> Introduction</a></li>
<li class="chapter" data-level="4.5.3" data-path="title.html"><a href="title.html#related-literature"><i class="fa fa-check"></i><b>4.5.3</b> Related Literature</a></li>
<li class="chapter" data-level="4.5.4" data-path="title.html"><a href="title.html#methods-1"><i class="fa fa-check"></i><b>4.5.4</b> Methods</a></li>
<li class="chapter" data-level="4.5.5" data-path="title.html"><a href="title.html#result"><i class="fa fa-check"></i><b>4.5.5</b> Result</a></li>
<li class="chapter" data-level="4.5.6" data-path="title.html"><a href="title.html#discussion"><i class="fa fa-check"></i><b>4.5.6</b> Discussion</a></li>
<li class="chapter" data-level="4.5.7" data-path="title.html"><a href="title.html#conclusion-2"><i class="fa fa-check"></i><b>4.5.7</b> Conclusion</a></li>
<li class="chapter" data-level="4.5.8" data-path="title.html"><a href="title.html#references-1"><i class="fa fa-check"></i><b>4.5.8</b> References</a></li>
<li class="chapter" data-level="4.5.9" data-path="title.html"><a href="title.html#random-multimodel-deep-learning-for-classification"><i class="fa fa-check"></i><b>4.5.9</b> Random Multimodel Deep Learning for Classification</a></li>
<li class="chapter" data-level="4.5.10" data-path="title.html"><a href="title.html#adversarial-attacks-against-medical-deep-learning-systems"><i class="fa fa-check"></i><b>4.5.10</b> Adversarial Attacks Against Medical Deep Learning Systems</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i><b>5</b> Machine Learning</a>
<ul>
<li class="chapter" data-level="5.1" data-path="validation-and-comparison-of-covid-19-mortality-prediction-models-on-multi-source-data.html"><a href="validation-and-comparison-of-covid-19-mortality-prediction-models-on-multi-source-data.html"><i class="fa fa-check"></i><b>5.1</b> Validation and comparison of COVID-19 mortality prediction models on multi-source data</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="validation-and-comparison-of-covid-19-mortality-prediction-models-on-multi-source-data.html"><a href="validation-and-comparison-of-covid-19-mortality-prediction-models-on-multi-source-data.html#abstract-4"><i class="fa fa-check"></i><b>5.1.1</b> Abstract</a></li>
<li class="chapter" data-level="5.1.2" data-path="validation-and-comparison-of-covid-19-mortality-prediction-models-on-multi-source-data.html"><a href="validation-and-comparison-of-covid-19-mortality-prediction-models-on-multi-source-data.html#introduction-11"><i class="fa fa-check"></i><b>5.1.2</b> Introduction</a></li>
<li class="chapter" data-level="5.1.3" data-path="validation-and-comparison-of-covid-19-mortality-prediction-models-on-multi-source-data.html"><a href="validation-and-comparison-of-covid-19-mortality-prediction-models-on-multi-source-data.html#data-description"><i class="fa fa-check"></i><b>5.1.3</b> Data description</a></li>
<li class="chapter" data-level="5.1.4" data-path="validation-and-comparison-of-covid-19-mortality-prediction-models-on-multi-source-data.html"><a href="validation-and-comparison-of-covid-19-mortality-prediction-models-on-multi-source-data.html#comparison-of-the-models"><i class="fa fa-check"></i><b>5.1.4</b> Comparison of the models</a></li>
<li class="chapter" data-level="5.1.5" data-path="validation-and-comparison-of-covid-19-mortality-prediction-models-on-multi-source-data.html"><a href="validation-and-comparison-of-covid-19-mortality-prediction-models-on-multi-source-data.html#conclusions-1"><i class="fa fa-check"></i><b>5.1.5</b> Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="one-model-to-fit-them-all-covid-19-survival-prediction-using-multinational-data.html"><a href="one-model-to-fit-them-all-covid-19-survival-prediction-using-multinational-data.html"><i class="fa fa-check"></i><b>5.2</b> One model to fit them all: COVID-19 survival prediction using multinational data</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="one-model-to-fit-them-all-covid-19-survival-prediction-using-multinational-data.html"><a href="one-model-to-fit-them-all-covid-19-survival-prediction-using-multinational-data.html#abstract-5"><i class="fa fa-check"></i><b>5.2.1</b> Abstract</a></li>
<li class="chapter" data-level="5.2.2" data-path="one-model-to-fit-them-all-covid-19-survival-prediction-using-multinational-data.html"><a href="one-model-to-fit-them-all-covid-19-survival-prediction-using-multinational-data.html#introduction-12"><i class="fa fa-check"></i><b>5.2.2</b> Introduction</a></li>
<li class="chapter" data-level="5.2.3" data-path="one-model-to-fit-them-all-covid-19-survival-prediction-using-multinational-data.html"><a href="one-model-to-fit-them-all-covid-19-survival-prediction-using-multinational-data.html#data-sources"><i class="fa fa-check"></i><b>5.2.3</b> Data sources</a></li>
<li class="chapter" data-level="5.2.4" data-path="one-model-to-fit-them-all-covid-19-survival-prediction-using-multinational-data.html"><a href="one-model-to-fit-them-all-covid-19-survival-prediction-using-multinational-data.html#model-building"><i class="fa fa-check"></i><b>5.2.4</b> Model building</a></li>
<li class="chapter" data-level="5.2.5" data-path="one-model-to-fit-them-all-covid-19-survival-prediction-using-multinational-data.html"><a href="one-model-to-fit-them-all-covid-19-survival-prediction-using-multinational-data.html#summary-and-discussion"><i class="fa fa-check"></i><b>5.2.5</b> Summary and discussion</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html"><a href="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html"><i class="fa fa-check"></i><b>5.3</b> Transparent machine learning to support predicting COVID-19 infection risk based on chronic diseases</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html"><a href="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html#abstract-6"><i class="fa fa-check"></i><b>5.3.1</b> Abstract</a></li>
<li class="chapter" data-level="5.3.2" data-path="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html"><a href="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html#introduction-13"><i class="fa fa-check"></i><b>5.3.2</b> Introduction</a></li>
<li class="chapter" data-level="5.3.3" data-path="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html"><a href="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html#case-study"><i class="fa fa-check"></i><b>5.3.3</b> Case Study</a></li>
<li class="chapter" data-level="5.3.4" data-path="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html"><a href="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html#flaws"><i class="fa fa-check"></i><b>5.3.4</b> Flaws</a></li>
<li class="chapter" data-level="5.3.5" data-path="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html"><a href="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html#improvements"><i class="fa fa-check"></i><b>5.3.5</b> Improvements</a></li>
<li class="chapter" data-level="5.3.6" data-path="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html"><a href="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html#transparent-machine-learning"><i class="fa fa-check"></i><b>5.3.6</b> Transparent Machine Learning</a></li>
<li class="chapter" data-level="5.3.7" data-path="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html"><a href="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html#data"><i class="fa fa-check"></i><b>5.3.7</b> Data</a></li>
<li class="chapter" data-level="5.3.8" data-path="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html"><a href="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html#application"><i class="fa fa-check"></i><b>5.3.8</b> Application</a></li>
<li class="chapter" data-level="5.3.9" data-path="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html"><a href="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html#conclusions-2"><i class="fa fa-check"></i><b>5.3.9</b> Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html"><a href="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html"><i class="fa fa-check"></i><b>5.4</b> Comparison of neural networks and tree-based models in the clinical prediction of the course of COVID-19 illness</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html"><a href="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html#abstract-7"><i class="fa fa-check"></i><b>5.4.1</b> Abstract</a></li>
<li class="chapter" data-level="5.4.2" data-path="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html"><a href="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html#introduction-14"><i class="fa fa-check"></i><b>5.4.2</b> Introduction</a></li>
<li class="chapter" data-level="5.4.3" data-path="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html"><a href="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html#methods-2"><i class="fa fa-check"></i><b>5.4.3</b> Methods</a></li>
<li class="chapter" data-level="5.4.4" data-path="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html"><a href="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html#results-1"><i class="fa fa-check"></i><b>5.4.4</b> Results</a></li>
<li class="chapter" data-level="5.4.5" data-path="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html"><a href="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html#discussion-1"><i class="fa fa-check"></i><b>5.4.5</b> Discussion</a></li>
<li class="chapter" data-level="5.4.6" data-path="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html"><a href="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html#source-code"><i class="fa fa-check"></i><b>5.4.6</b> Source code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="rashomonml.html"><a href="rashomonml.html"><i class="fa fa-check"></i><b>6</b> RashomonML</a>
<ul>
<li class="chapter" data-level="6.1" data-path="topic.html"><a href="topic.html"><i class="fa fa-check"></i><b>6.1</b> Topic</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="topic.html"><a href="topic.html#abstract-8"><i class="fa fa-check"></i><b>6.1.1</b> Abstract</a></li>
<li class="chapter" data-level="6.1.2" data-path="topic.html"><a href="topic.html#literature-review"><i class="fa fa-check"></i><b>6.1.2</b> Literature review</a></li>
<li class="chapter" data-level="6.1.3" data-path="topic.html"><a href="topic.html#results-2"><i class="fa fa-check"></i><b>6.1.3</b> Results</a></li>
<li class="chapter" data-level="6.1.4" data-path="topic.html"><a href="topic.html#best-models"><i class="fa fa-check"></i><b>6.1.4</b> Best models</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="title-1.html"><a href="title-1.html"><i class="fa fa-check"></i><b>6.2</b> Title</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="title-1.html"><a href="title-1.html#literature-review-1"><i class="fa fa-check"></i><b>6.2.1</b> Literature review</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="rashomon-on-mimic-draft.html"><a href="rashomon-on-mimic-draft.html"><i class="fa fa-check"></i><b>6.3</b> Rashomon on MIMIC - draft</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="rashomon-on-mimic-draft.html"><a href="rashomon-on-mimic-draft.html#abstract-9"><i class="fa fa-check"></i><b>6.3.1</b> Abstract</a></li>
<li class="chapter" data-level="6.3.2" data-path="rashomon-on-mimic-draft.html"><a href="rashomon-on-mimic-draft.html#review-of-the-literature"><i class="fa fa-check"></i><b>6.3.2</b> Review of the literature</a></li>
<li class="chapter" data-level="6.3.3" data-path="rashomon-on-mimic-draft.html"><a href="rashomon-on-mimic-draft.html#raw-results"><i class="fa fa-check"></i><b>6.3.3</b> Raw results</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="roshomon-sets-on-death-prediction-xgb-models-using-mimic-iii-database.html"><a href="roshomon-sets-on-death-prediction-xgb-models-using-mimic-iii-database.html"><i class="fa fa-check"></i><b>6.4</b> Roshomon sets on death prediction XGB models using MIMIC-III database</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="roshomon-sets-on-death-prediction-xgb-models-using-mimic-iii-database.html"><a href="roshomon-sets-on-death-prediction-xgb-models-using-mimic-iii-database.html#an-initial-literature-review"><i class="fa fa-check"></i><b>6.4.1</b> An initial literature review</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="roshomon-sets-of-in-hospital-mortality-prediction-random-forest-models.html"><a href="roshomon-sets-of-in-hospital-mortality-prediction-random-forest-models.html"><i class="fa fa-check"></i><b>6.5</b> Roshomon sets of in-hospital mortality prediction random forest models</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="roshomon-sets-of-in-hospital-mortality-prediction-random-forest-models.html"><a href="roshomon-sets-of-in-hospital-mortality-prediction-random-forest-models.html#abstract-10"><i class="fa fa-check"></i><b>6.5.1</b> Abstract</a></li>
<li class="chapter" data-level="6.5.2" data-path="roshomon-sets-of-in-hospital-mortality-prediction-random-forest-models.html"><a href="roshomon-sets-of-in-hospital-mortality-prediction-random-forest-models.html#related-work-1"><i class="fa fa-check"></i><b>6.5.2</b> Related work</a></li>
<li class="chapter" data-level="6.5.3" data-path="roshomon-sets-of-in-hospital-mortality-prediction-random-forest-models.html"><a href="roshomon-sets-of-in-hospital-mortality-prediction-random-forest-models.html#results-3"><i class="fa fa-check"></i><b>6.5.3</b> Results</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="_blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Case Studies</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Comparison of neural networks and tree-based models in the clinical prediction of the course of COVID-19 illness</h2>
<p><em>Authors: Jakub Fołtyn, Kacper Grzymkowski, Konrad Komisarczyk</em></p>
<div id="abstract-7" class="section level3" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Abstract</h3>
<p>The COVID-19 pandemic overwhelmed medical staff around the world, showing that effective and explainable models are needed to help allocate limited resources to those in need.
Many published models for predicting COVID-19 related ICU admission and mortality were tree-based models or neural network models.
We compared the two architectures in effectiveness, explainability and reproducibility.
The two architectures appear to be similar with regards to their effectiveness, but the neural network model had significant reproducibility issues and worse explainability.</p>
</div>
<div id="introduction-14" class="section level3" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Introduction</h3>
<p>In 2020 many papers presenting models aimed to predict the course of COVID-19 in patients emerged <span class="citation">(<a href="#ref-5-4-ma-ng-xu" role="doc-biblioref">Ma et al. 2020</a>; <a href="#ref-5-4-yan-et-al" role="doc-biblioref">Yan et al. 2020c</a>; <a href="#ref-5-4-zheng-zhu" role="doc-biblioref">Zheng et al. 2020b</a>)</span>. Article we are referring to <span class="citation">(<a href="#ref-5-4-li-et-al" role="doc-biblioref">Li et al. 2020</a>)</span> differed from the majority with the use of neural networks.</p>
<p>In the past there were many attempts to compare effectiveness of artificial neural networks and tree-based models at various tasks using different types of data including tabular data <span class="citation">(<a href="#ref-5-4-ahmad-mourshed" role="doc-biblioref">Ahmad et al. 2017</a>; <a href="#ref-5-4-arsad-buniyamin" role="doc-biblioref">Arsad et al. 2013</a>)</span> and tasks connected to hospital patients outcomes <span class="citation">(<a href="#ref-5-4-wang-li" role="doc-biblioref">J. Wang et al. 2009</a>)</span>.
There were analyses showing superiority of forests over simple neural networks on small (up to 1000 records) tabular datasets <span class="citation">(<a href="#ref-5-4-klambauer-normalizing" role="doc-biblioref">Klambauer et al. 2017</a>)</span>. Data used by the referred article’s authors consisted of 1020 or 1106 observations depending on the researched problem.</p>
<p>Authors note the importance of explainability of clinical models <span class="citation">(<a href="#ref-5-4-tonekaboni19a" role="doc-biblioref">Tonekaboni et al. 2019</a>)</span> due to the need of establishing clinician’s trust to successfully deploy a model. There are tools for explaining tree-based models <span class="citation">(<a href="#ref-EMA" role="doc-biblioref">Biecek and Burzykowski 2021</a>; <a href="#ref-5-4-chen-guestrin" role="doc-biblioref">Chen and Guestrin 2016</a>)</span> and some of methods are not available for neural networks. Tools to calculate SHAP values for forest models were developed <span class="citation">(<a href="#ref-5-4-lundberg-consistent" role="doc-biblioref">Lundberg et al. 2019</a>)</span>, while general algorithm to compute them exactly in a reasonable complexity for deep learning models, only approximations can be made. Explaining neural networks with SHAP values is an important issue in the field <span class="citation">(<a href="#ref-5-4-wang-shapley" role="doc-biblioref">R. Wang et al. 2021</a>)</span>.</p>
<p>The referred article does not provide a source code for the replication of the results. Taking care about the reproducibility is considered a major problem in the academic society <span class="citation">(<a href="#ref-wb_2020" role="doc-biblioref">WUoT 2020</a>)</span>.</p>
<p>Motivated by the preceding we aim to contribute to the work started by the authors of the referred article. At first, we try to replicate models. Then we propose different network architectures and XGBoost models. Finally, we compare the effectiveness of all the models at the prediction tasks and their explanations based on the SHAP values.</p>
</div>
<div id="methods-2" class="section level3" number="5.4.3">
<h3><span class="header-section-number">5.4.3</span> Methods</h3>
<p>Three neural network models and XGBoost model were trained for both ICU admission prediction and death prediction.
The tested neural network architectures were:</p>
<ul>
<li><p>replication of the architecture proposed by <span class="citation">(<a href="#ref-5-4-li-et-al" role="doc-biblioref">Li et al. 2020</a>)</span> (referred to as the <em>Baseline</em> model),</p></li>
<li><p>modified version of that architecture using binary cross entropy as the loss function (<em>Baseline (crossentropy)</em> or <em>Modified</em>)),</p></li>
<li><p>basic neural network model using two hidden layers of 32 neurons each with binary cross entropy as the loss function (<em>Basic</em>).</p></li>
</ul>
<p>Neural network models were created using Keras Python library <span class="citation">(<a href="#ref-5-4-tensorflow-2015" role="doc-biblioref">Abadi et al. 2015</a>)</span>.
All models were trained and tested on data provided in the article <span class="citation">(<a href="#ref-5-4-li-et-al" role="doc-biblioref">Li et al. 2020</a>)</span>.
Feature selection was performed as described in the article.
Data was split in a 75:25 (train:test) ration.
To reduce overfitting, an internal 0.2 validation set size was used.</p>
<p>Effectiveness of those models were compared using receiver operating characteristic area under curve (ROC AUC) metric <span class="citation">(<a href="#ref-5-4-hanley" role="doc-biblioref">Hanley 2014</a>)</span>.
ROC AUC values were calculated using the test data held out from training.
Neural network models were trained 25 times each to compare stability.</p>
<p>SHAP values were calculated for the xgboost models using the R <code>treeshap</code> library <span class="citation">(<a href="#ref-5-4-treeshap" role="doc-biblioref">Komisarczyk, Konrad and Maksymiuk, Szymon and Koźmiński, Paweł and Biecek, Przemysław 2020</a>)</span>.
Approximate SHAP values were approximated for neural network models using DeepExplainer from the Python SHAP library.
Feature importance was calculated using mean SHAP values and compared.</p>
</div>
<div id="results-1" class="section level3" number="5.4.4">
<h3><span class="header-section-number">5.4.4</span> Results</h3>
<p>ROC curve comparison between all ICU admission models is shown in the figure <a href="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html#fig:fig1">5.12</a>. XGBoost model was the best-performing model, based on the ROC AUC score. The best-performing neural network model was the <em>Basic</em> model (the neural network model with only 2 layers), with a ROC AUC score of 0.696. In the mortality prediction task, however, the <em>Basic</em> neural network model outperformed all other models, as shown in figure <a href="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html#fig:fig2">5.13</a>. It is worth noting that in both cases the <em>Baseline</em> model, which was the replication of the <span class="citation">(<a href="#ref-5-4-li-et-al" role="doc-biblioref">Li et al. 2020</a>)</span> model had the lowest ROC AUC scored, and therefore is indicated to have performed the worst.</p>
<div class="figure" style="text-align: center"><span id="fig:fig1"></span>
<img src="images/5-4-icu_comparison.png" alt="ROC curves comparison for ICU admission prediction models. The dashed line indicates a random classifier (a model that classifies values in a random way). Each row in the legend contains model's line color, name and ROC AUC score. Neural network model names explained: *Baseline* - a replication of the model from [@5-4-li-et-al] article, *Basic* - basic model using two hidden layers of 32 neurons each with binary cross entropy as the loss function, *Modified* - modified version of the article model using binary cross entropy as the loss function." width="50%" />
<p class="caption">
Figure 5.12: ROC curves comparison for ICU admission prediction models. The dashed line indicates a random classifier (a model that classifies values in a random way). Each row in the legend contains model’s line color, name and ROC AUC score. Neural network model names explained: <em>Baseline</em> - a replication of the model from <span class="citation">(<a href="#ref-5-4-li-et-al" role="doc-biblioref">Li et al. 2020</a>)</span> article, <em>Basic</em> - basic model using two hidden layers of 32 neurons each with binary cross entropy as the loss function, <em>Modified</em> - modified version of the article model using binary cross entropy as the loss function.
</p>
</div>
<div class="figure" style="text-align: center"><span id="fig:fig2"></span>
<img src="images/5-4-mortality_comparison.png" alt="ROC curves comparison for mortality prediction models. The dashed line indicates a random classifier (a model that classifies values in a random way). Each row in the legend contains model's line color, model's  and ROC AUC score. Neural network model names explained: *Baseline* -  a replication of the model from  [@5-4-li-et-al]  article, *Basic* - basic model using two hidden layers of 32 neurons each with binary cross entropy as the loss function, *Modified* - modified version of the article model using binary cross entropy as the loss function." width="50%" />
<p class="caption">
Figure 5.13: ROC curves comparison for mortality prediction models. The dashed line indicates a random classifier (a model that classifies values in a random way). Each row in the legend contains model’s line color, model’s and ROC AUC score. Neural network model names explained: <em>Baseline</em> - a replication of the model from <span class="citation">(<a href="#ref-5-4-li-et-al" role="doc-biblioref">Li et al. 2020</a>)</span> article, <em>Basic</em> - basic model using two hidden layers of 32 neurons each with binary cross entropy as the loss function, <em>Modified</em> - modified version of the article model using binary cross entropy as the loss function.
</p>
</div>
<p>To ensure the reliability of neural network models, each model was trained and tested 25 times. The resulting boxplots can be seen in the figure <a href="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html#fig:fig3">5.14</a> for the ICU admission prediction data and in the figure <a href="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html#fig:fig4">5.15</a> for the mortality data. The comparison score for both cases was ROC AUC score. As we can see in figure <a href="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html#fig:fig3">5.14</a>, the <em>Baseline</em> model trained on ICU admission data has proven to be especially unreliable, with AUC score ranging from 0.35 up to 0.7, while other 2 models outperformed it, with both better scores and lower variances. Figure <a href="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html#fig:fig4">5.15</a> shows that models trained and tested on the mortality data had overall better ROC AUC scores than their ICU admission counterparts, but some outliers can be noticed for both <em>Baseline</em> and <em>Modified</em>, reaching as low as 0.5 ROC AUC score.</p>
<div class="figure" style="text-align: center"><span id="fig:fig3"></span>
<img src="images/5-4-icu_nn.png" alt="each boxplot represents 25 independent model tests. Neural network model names explained: *Baseline* -  a replication of the model from [@5-4-li-et-al] article, *Basic* - basic model using two hidden layers of 32 neurons each with binary cross entropy as the loss function, *Modified* - modified version of the article model using binary cross entropy as the loss function." width="50%" />
<p class="caption">
Figure 5.14: each boxplot represents 25 independent model tests. Neural network model names explained: <em>Baseline</em> - a replication of the model from <span class="citation">(<a href="#ref-5-4-li-et-al" role="doc-biblioref">Li et al. 2020</a>)</span> article, <em>Basic</em> - basic model using two hidden layers of 32 neurons each with binary cross entropy as the loss function, <em>Modified</em> - modified version of the article model using binary cross entropy as the loss function.
</p>
</div>
<div class="figure" style="text-align: center"><span id="fig:fig4"></span>
<img src="images/5-4-mortality_nn.png" alt="each boxplot represents 25 independent model tests. Neural network model names explained: *Baseline* -  a replication of the model from [@5-4-li-et-al] article, *Basic* - basic model using two hidden layers of 32 neurons each with binary cross entropy as the loss function, *Modified* - modified version of the article model using binary cross entropy as the loss function." width="50%" />
<p class="caption">
Figure 5.15: each boxplot represents 25 independent model tests. Neural network model names explained: <em>Baseline</em> - a replication of the model from <span class="citation">(<a href="#ref-5-4-li-et-al" role="doc-biblioref">Li et al. 2020</a>)</span> article, <em>Basic</em> - basic model using two hidden layers of 32 neurons each with binary cross entropy as the loss function, <em>Modified</em> - modified version of the article model using binary cross entropy as the loss function.
</p>
</div>
<p>Feature importance comparison for ICU admission task is shown in figure <a href="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html#fig:fig5">5.16</a>. In all of these models <em>Procalcitionin</em> was the most important feature (it is worth reminding, that our models were trained only on the top 5 features for ICU admission task, and top 6 features for mortality prediction task), while other features’ significance differ between models. What is more, <em>Procalcitionin</em> was much more impactful for the neural network model, with mean SHAP value nearly doubling the value of the 2nd most import feature.</p>
<div class="figure" style="text-align: center"><span id="fig:fig5"></span>
<img src="images/5-4-icu_feature.jpg" alt="*a)* Boruta algorithm results from the article. Only the top 5 features are taken into consideration. *b)* feature importance barplot for xgboost model *c)* feature importance barplot for *Basic* neural network (model using two hidden layers of 32 neurons each with binary cross entropy as the loss function). The bars in *b)* and *c)* represent the mean SHAP values for each feature." width="70%" />
<p class="caption">
Figure 5.16: <em>a)</em> Boruta algorithm results from the article. Only the top 5 features are taken into consideration. <em>b)</em> feature importance barplot for xgboost model <em>c)</em> feature importance barplot for <em>Basic</em> neural network (model using two hidden layers of 32 neurons each with binary cross entropy as the loss function). The bars in <em>b)</em> and <em>c)</em> represent the mean SHAP values for each feature.
</p>
</div>
Feature importance comparison for mortality prediction task is shown in figure <a href="comparison-of-neural-networks-and-tree-based-models-in-the-clinical-prediction-of-the-course-of-covid-19-illness.html#fig:fig6">5.17</a>. <em>Age</em> was the most important feature for all of these models. As in ICU admission prediction task, other features’ significance differ between models.
<div class="figure" style="text-align: center"><span id="fig:fig6"></span>
<img src="images/5-4-mortality_feature.jpg" alt="*a)* Boruta algorithm results from the article. Only the top 6 features are taken into consideration. *b)* feature importance barplot for xgboost model *c)* feature importance barplot for *Basic* neural network (model using two hidden layers of 32 neurons each with binary cross entropy as the loss function). The bars in *b)* and *c)* represent the mean SHAP values for each feature." width="70%" />
<p class="caption">
Figure 5.17: <em>a)</em> Boruta algorithm results from the article. Only the top 6 features are taken into consideration. <em>b)</em> feature importance barplot for xgboost model <em>c)</em> feature importance barplot for <em>Basic</em> neural network (model using two hidden layers of 32 neurons each with binary cross entropy as the loss function). The bars in <em>b)</em> and <em>c)</em> represent the mean SHAP values for each feature.
</p>
</div>
</div>
<div id="discussion-1" class="section level3" number="5.4.5">
<h3><span class="header-section-number">5.4.5</span> Discussion</h3>
<p>The COVID-19 pandemic has demonstrated a need for quick development, testing, validation and deployment of machine learning models.
However, this can’t come at the expense of reproducibility, as the replication crisis still poses a serious issue.
Parts of the description provided in the reference article can be imprecise enough to be misunderstood or have more than one meaning.
In the field of machine learning both data and source code are necessary components to reproduce results.
This is even more important when proposing unusual model architectures, as those can lead to new discoveries in the field.
However, when proposing such an architecture, a baseline model should be used to demonstrate that the proposed architecture can preform better.
Finally, different external validation techniques should be used, such as a leave-one-hospital-out cross-validation or working on combined data from multiple sources.
While our team focused primarily on comparing model architectures, other chapters in the WB Book examine those aspects of fair artificial intelligence.
In conclusion, we have shown the importance of providing reproducible code, as well as having a baseline model to compare the results.</p>
</div>
<div id="source-code" class="section level3" number="5.4.6">
<h3><span class="header-section-number">5.4.6</span> Source code</h3>
<p>Source code for all models and figures mentioned in the article, including used data is available at the Github repository <a href="https://github.com/konrad-komisarczyk/wb2021">https://github.com/konrad-komisarczyk/wb2021</a> in the <code>proj2</code> subdirectory.</p>

</div>
</div>
<!-- </div> -->
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-5-4-tensorflow-2015" class="csl-entry">
Abadi, M., Agarwal, A., Barham, P., Brevdo, E., Chen, Z., Citro, C., et al. (2015). <span class="nocase">TensorFlow: Large-Scale Machine Learning on Heterogeneous Systems</span>. <em>USENIX conference on Operating Systems Design and Implementation</em>. <a href="https://dl.acm.org/doi/10.5555/3026877.3026899">https://dl.acm.org/doi/10.5555/3026877.3026899</a>
</div>
<div id="ref-5-4-ahmad-mourshed" class="csl-entry">
Ahmad, M. W., Mourshed, M., &amp; Rezgui, Y. (2017). <span class="nocase">Trees vs Neurons: Comparison between random forest and ANN for high-resolution prediction of building energy consumption</span>. <em>Energy and Buildings</em>, <em>147</em>, 77--89. <a href="https://doi.org/10.1016/j.enbuild.2017.04.038">https://doi.org/10.1016/j.enbuild.2017.04.038</a>
</div>
<div id="ref-5-4-arsad-buniyamin" class="csl-entry">
Arsad, P. M., Buniyamin, N., &amp; Manan, J. A. (2013). <span class="nocase">Prediction of engineering students’ academic performance using Artificial Neural Network and Linear Regression: A comparison</span>. <em>ICEED</em>. <a href="https://doi.org/10.1109/iceed.2013.6908300">https://doi.org/10.1109/iceed.2013.6908300</a>
</div>
<div id="ref-EMA" class="csl-entry">
Biecek, P., &amp; Burzykowski, T. (2021). <em><span>Explanatory Model Analysis</span></em>. Chapman; Hall/CRC, New York. <a href="https://pbiecek.github.io/ema/">https://pbiecek.github.io/ema/</a>
</div>
<div id="ref-5-4-chen-guestrin" class="csl-entry">
Chen, T., &amp; Guestrin, C. (2016). <span>XGBoost: A Scalable Tree Boosting System</span>. <em>KDD</em>. https://doi.org/<a href="https://doi.org/10.1145/2939672.2939785">https://doi.org/10.1145/2939672.2939785</a>
</div>
<div id="ref-5-4-hanley" class="csl-entry">
Hanley, J. A. (2014). <span>Receiver Operating Characteristic (ROC) Curves</span>. <em>Wiley StatsRef: Statistics Reference Online</em>. <a href="https://doi.org/10.1002/9781118445112.stat05255">https://doi.org/10.1002/9781118445112.stat05255</a>
</div>
<div id="ref-5-4-klambauer-normalizing" class="csl-entry">
Klambauer, G., Unterthiner, T., Mayr, A., &amp; Hochreiter, S. (2017). <span>Self-Normalizing Neural Networks</span>. <em>arXiv:1706.02515</em>. <a href="https://arxiv.org/abs/1706.02515">https://arxiv.org/abs/1706.02515</a>
</div>
<div id="ref-5-4-treeshap" class="csl-entry">
Komisarczyk, Konrad and Maksymiuk, Szymon and Koźmiński, Paweł and Biecek, Przemysław. (2020). <span class="nocase">treeshap: Fast SHAP values computation for ensemble models</span>. <em>R package</em>. <a href="https://github.com/ModelOriented/treeshap">https://github.com/ModelOriented/treeshap</a>
</div>
<div id="ref-5-4-li-et-al" class="csl-entry">
Li, X., Ge, P., Zhu, J., Li, H., Graham, J., Singer, A., et al. (2020). <span class="nocase">Deep learning prediction of likelihood of ICU admission and mortality in COVID-19 patients using clinical variables</span>. <em>PeerJ</em>, <em>8</em>. <a href="https://peerj.com/articles/10337/">https://peerj.com/articles/10337/</a>
</div>
<div id="ref-5-4-lundberg-consistent" class="csl-entry">
Lundberg, S. M., Erion, G. G., &amp; Lee, S.-I. (2019). <span class="nocase">Consistent Individualized Feature Attribution for Tree Ensembles</span>. <em>ICML Workshop</em>. <a href="https://arxiv.org/abs/1802.03888">https://arxiv.org/abs/1802.03888</a>
</div>
<div id="ref-5-4-ma-ng-xu" class="csl-entry">
Ma, X., Ng, M., Xu, S., Xu, Z., Qiu, H., Liu, Y., et al. (2020). <span class="nocase">Development and validation of prognosis model of mortality risk in patients with COVID-19</span>. <em>Epidemiology and Infection</em>, <em>148</em>. <a href="http://doi.org/10.1017/S0950268820001727">http://doi.org/10.1017/S0950268820001727</a>
</div>
<div id="ref-5-4-tonekaboni19a" class="csl-entry">
Tonekaboni, S., Joshi, S., McCradden, M. D., &amp; Goldenberg, A. (2019). <span class="nocase">What Clinicians Want: Contextualizing Explainable Machine Learning for Clinical End Use</span>. <em>Machine Learning for Healthcare</em>. <a href="http://proceedings.mlr.press/v106/tonekaboni19a.html">http://proceedings.mlr.press/v106/tonekaboni19a.html</a>
</div>
<div id="ref-5-4-wang-li" class="csl-entry">
Wang, J., Li, M., Hu, Y., &amp; Zhu, Y. (2009). <span class="nocase">Comparison of hospital charge prediction models for gastric cancer patients: neural network vs. decision tree models</span>. <em>BMC Health Services Research</em>, <em>9</em>(1). <a href="https://doi.org/10.1186/1472-6963-9-161">https://doi.org/10.1186/1472-6963-9-161</a>
</div>
<div id="ref-5-4-wang-shapley" class="csl-entry">
Wang, R., Wang, X., &amp; Inouye, D. I. (2021). <span>Shapley Explanation Networks</span>. <em>ICLR</em>. <a href="https://openreview.net/forum?id=vsU0efpivw">https://openreview.net/forum?id=vsU0efpivw</a>
</div>
<div id="ref-wb_2020" class="csl-entry">
WUoT. (2020). ML case studies: Reproducibility of scientific papers. <a href="https://mini-pw.github.io/2020L-WB-Book/reproducibility.html">https://mini-pw.github.io/2020L-WB-Book/reproducibility.html</a>
</div>
<div id="ref-5-4-yan-et-al" class="csl-entry">
Yan, L., Zhang, H.-T., Goncalves, J., Xiao, Y., Wang, M., Guo, Y., et al. (2020c). <span class="nocase">An interpretable mortality prediction model for COVID-19 patients</span>. <em>Nature Machine Intelligence</em>, <em>2</em>(5), 283--288. <a href="https://www.nature.com/articles/s42256-020-0180-7">https://www.nature.com/articles/s42256-020-0180-7</a>
</div>
<div id="ref-5-4-zheng-zhu" class="csl-entry">
Zheng, Y., Zhu, Y., Ji, M., Wang, R., Liu, X., Zhang, M., et al. (2020b). <span class="nocase">A Learning-Based Model to Evaluate Hospitalization Priority in COVID-19 Pandemics</span>. <em>Patterns</em>, <em>1</em>(9), 100173. <a href="https://doi.org/10.1016/j.patter.2020.100173">https://doi.org/10.1016/j.patter.2020.100173</a>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="transparent-machine-learning-to-support-predicting-covid-19-infection-risk-based-on-chronic-diseases.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="rashomonml.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/mini-pw/2021L-WB-Book/edit/master/5-4-ml.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["book.pdf", "book.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
